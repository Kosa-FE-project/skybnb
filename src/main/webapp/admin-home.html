<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Home</title>
<link href="https://fonts.googleapis.com/css2?family=Aboreto&display=swap" rel="stylesheet">

<link rel="stylesheet" href="./css/home.css" />
<link rel="stylesheet" href="./css/user-home.css" />
<link rel="stylesheet" href="./css/style.css" />
<link rel="stylesheet" href="./css/admin-home.css" />
<link rel="stylesheet" href="./css/reset.css" />
<!-- bootStrap -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
<!-- Jquery (ë°˜ë“œì‹œ ìˆì–´ì•¼ í•¨!) -->
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- Chart.js (ë°˜ë“œì‹œ ìˆì–´ì•¼ í•¨!) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
<!-- jVectorMap Core (ë°˜ë“œì‹œ ìˆì–´ì•¼ í•¨!) -->
<script
	src="https://cdn.jsdelivr.net/npm/jvectormap@1.2.2/jquery-jvectormap.min.js"></script>
<!--  ëŒ€í•œë¯¼êµ­ ì§€ë„ ë°ì´í„° -->
<script src="./js/jquery-jvectormap-kr-mill.js"></script>
<script>
$(()=>{
	 //setInterval ì´ë¯¸ì§€ ìë™ë³€ê²½ í•¨ìˆ˜
	 const img = document.getElementById("media-img");
	 const video = document.getElementById("media-video");

	 const images = ["./img/userpage_mainbg.png", "./img/userpage_mainbg2.png", "./img/userpage_mainbg3.png"];
	 let imgIndex = 0;
	 let mainInterval;

	 function showImage(index) {
	   img.src = images[index];
	   img.style.display = "block";
	   video.style.display = "none";
	   video.pause();
	 }

	 function playVideo() {
	   img.style.display = "none";
	   video.style.display = "block";
	   video.currentTime = 0;
	   video.muted = true;
	   video.play();
	 }

	 // ì£¼ê¸°ì  ìˆœí™˜ ì‹¤í–‰
	 function startCycle() {
	   showImage(0); // ì‹œì‘ ì´ë¯¸ì§€
	   imgIndex = 1;

	   // ì´ë¯¸ì§€ 3ì¥ ìˆœí™˜: 5ì´ˆ ê°„ê²©
	   mainInterval = setInterval(() => {
	     if (imgIndex < images.length) {
	       showImage(imgIndex);
	       imgIndex++;
	     } else {
	       clearInterval(mainInterval);
	       playVideo();

	       // 20ì´ˆ í›„ ì´ë¯¸ì§€ 1ë¡œ ëŒì•„ê°€ë©° ë£¨í”„ ë°˜ë³µ
	       setTimeout(startCycle, 20000);
	     }
	   }, 5000);
	 }

	 startCycle();
	 
	 
	 //í˜ì´ì§€ ì´ë™ ì½”ë“œ
	 $('.header-icon').on('click',function(){
		 window.location.href = "./my-page.html";
	 })
	  $('.logo').on('click',()=>{
		  window.location.href = "./index.html";
	  })
	 
	 
	Chart.register(ChartDataLabels);
	
	//Age ì°¨íŠ¸
	const ageCtx=$('#chart-age-canvas');
	const ageData = {
			  labels: [
			    '20ëŒ€ í›„ë°˜',
			    '20ëŒ€ ì´ˆì¤‘ë°˜',
			    '30ëŒ€ ì´ˆì¤‘ë°˜',
			    'ê·¸ ì™¸'
			  ],
			  datasets: [{
			    label: 'ì—°ë ¹ëŒ€ë³„ ì´ìš©ê° ë°ì´í„° ìˆ˜',
			    data: [4000, 3000, 500, 200],
			    backgroundColor: [
			      '#FF6B8A',
			      '#2D9CDB',
			      '#F2C94C',
			      '#C5CAE9'
			    ],
			   	hoverOffset: 25
			  }]
	};
	
	const ageConfig = {
			  type: 'doughnut',
			  data: ageData,
			  options: {
				  	maintainAspectRatio: false,
				  	responsive: true,
				  	radius : '80%',   // <-- í•µì‹¬, ê¸°ë³¸ì€ 100%
				    cutout: '60%',           // ë„ë„› ë‘ê»˜ ì¡°ì ˆ
				    plugins: {
				      legend: { 
				   			display: true,
		    	 			position: 'top',
		    	 			labels:{
		    	 			font: {
		    	 	            size: 12,
		    	 	          },
		    	 	        boxWidth: 20,
		    	 	        boxHeight: 20
		    	 			}
				      },   // ë²”ë¡€ ìˆ¨ê¸°ê¸°(ì›í•˜ë©´ true)
				      tooltip: { enabled: true },  // íˆ´íŒ ë„ê¸°(ì„ íƒ)
				      datalabels: {
				        // â‘  í‘œì‹œí•  ë‚´ìš©: í¼ì„¼íŠ¸ë¡œ ë³€í™˜
				        formatter: (value, ctx) => {
				          const total = ctx.chart._metasets[0].total;      // v4
				          const pct   = (value / total * 100).toFixed(0);
				          return pct + '%';
				        },
				        // â‘¡ ìœ„ì¹˜Â·ìŠ¤íƒ€ì¼
				        anchor: 'end',        // ë°–ìœ¼ë¡œ ëº„ ë•Œ 'end'
				        align: 'end',         // ì„  ë°– ì •ë ¬: 'center'ë©´ ê°€ìš´ë°
				        offset: 2,            // ì›ì—ì„œ ì–¼ë§ˆë‚˜ ë–¨ì–´ì§ˆì§€
				        font: { weight: 'bold', size: 14 },
				        color: '#455A64'      // ê¸€ììƒ‰
				      },
					 title: {
						display: true,
						text: 'Age Comparison',
				       	font: {
	    	 				family: 'Inria Serif, serif',  // â† í°íŠ¸ íŒ¨ë°€ë¦¬
	    	 	            weight: '700',                 // â† êµµê¸° (ë˜ëŠ” 'bold')
	    	 	            style: 'italic',
				       		size: 30,
				       		color : '#3A3A3A',
				       		position: 'top', 
				       	}
					 }
				      
				    },

			}
	};
	new Chart(ageCtx,ageConfig);
	
	//Revenue ì°¨íŠ¸
	const revenueCtx = $('#chart-revenue-canvas');
	const revenueData = {
	  labels: [
	    'January','February','March','April','May','June',
	    'July','August','September','October','November','December'
	  ],
	  datasets: [
	    {
	      type: 'bar',
	      label: 'ë§¤ì¶œì•¡',
	      data: [35000, 45000, 25000, 35000, 55000, 60000, 75000, 85000, 45000, 55000, 35000, 65000],
	      backgroundColor: '#D6DAF6',
	      borderWidth: 2,
	      borderRadius: 10,
	      yAxisID: 'y',
	      order:2,
	    },
	    {
	      type: 'line',
	      label: 'ì˜ˆì•½ê±´ìˆ˜',
	      data: [250, 350, 150, 250, 450, 500, 650, 750, 350, 450, 250, 550],
	      backgroundColor:  '#FF6B8A',
	      borderColor: '#FF6B8A',
	      borderWidth: 2,
	      pointRadius: 4,
	      yAxisID: 'y1',
	      order:1,
	    }
	  ]
	};

	const revenueConfig = {
	  data: revenueData,
	  options: {
	    maintainAspectRatio: false,
	    responsive: true,
	    scales: {
	      x: {
	        ticks: {
        	  autoSkip: false,
	          maxRotation: 45,
	          minRotation: 45,
	          font: {
	            size: 10
	          }
	        }
	      },
	      y: {
	        position: 'left',
	        ticks: {
	          callback: value => '$' + value.toLocaleString()
	        }
	      },
	      y1: {
	        position: 'right',
	       	min : 0,
	        max :1000,
	        grid: {
	          drawOnChartArea: false
	        }
	      }
	    },
	    plugins: {
	      legend: {
	        position: 'top',
	      },
	      title: {
	        display: true,
	        text: 'Monthly revenue',
	        font: {
 				family: 'Inria Serif, serif',  // â† í°íŠ¸ íŒ¨ë°€ë¦¬
 	            weight: '700',                 // â† êµµê¸° (ë˜ëŠ” 'bold')
 	            style: 'italic',
	       		size: 30,
	       		color : '#3A3A3A',
	       		position: 'top',
	        },
	      },
	      tooltip: {
	        callbacks: {
	          label: ctx => {
	            const value = ctx.parsed.y;
	            const label = ctx.dataset.label;
	            // ë§¤ì¶œì¼ ê²½ìš° ë‹¬ëŸ¬í‘œì‹œ, ì˜ˆì•½ê±´ìˆ˜ëŠ” ë‹¨ìˆœ ìˆ«ì
	            return label === 'ë§¤ì¶œì•¡'
	              ? `${label}: $${value.toLocaleString()}`
	              : `${label}: ${value.toLocaleString()}ê±´`;
	          }
	        }
	      },
	      datalabels: {
	        display: false
	      }
	    }
	  }
	};

new Chart(revenueCtx, revenueConfig);
	
	//Guest ì°¨íŠ¸
	const guestCtx=$('#chart-guest-canvas');
	const guestData = {
			  labels: [
			    'January','February','March','April','May','June','July','August','September','October',
			    'November','December'
			  ],
			  datasets: [{
			    label: 'ì´ìš©ê°',
			    data: [1500, 2000, 800, 2000, 3000, 2400, 4000, 5000, 2400, 1200, 2500, 4000],
			    borderColor: '#FF6B8A',
		     	backgroundColor: '#FF6B8A',
		      	tension: 0.4,
			  }]
	};
	const guestConfig = {
			  type: 'line',
			  data: guestData,
			  options: {
			  	maintainAspectRatio: false,
			  	responsive: true,
			  	scales: {
			        y: {
			          max: 6000,
			          min: 0 // Yì¶• ìµœì†Œê°’ ì„¤ì •
			        }
			  	},
			    animations: {
			      radius: {
			        duration: 400,
			        easing: 'linear',
			        loop: (context) => context.active
			      }
			    },
			    hoverRadius: 8,
			    hoverBackgroundColor: 'yellow',
			    interaction: {
			      mode: 'nearest',
			      intersect: false,
			      axis: 'x'
			    },
			    plugins: {
			    	legend: { display: true,
			    				position : 'top',
			      	},
				    title: {
				        display: true,
				        text: 'Monthly Guest',
				       	font: {
			 				family: 'Inria Serif, serif',  // â† í°íŠ¸ íŒ¨ë°€ë¦¬
	    	 	            weight: '700',                 // â† êµµê¸° (ë˜ëŠ” 'bold')
	    	 	            style: 'italic',
				       		size: 30,
				       		color : '#3A3A3A',
				       		position: 'top',
				       	}
				      },
			    	tooltip: {
			        	enabled: true
			      	},
			      	datalabels: {
	                    display: false // ë°ì´í„° ë¼ë²¨ ë¹„í™œì„±í™”
	                }
			    }
			  },
	};
	
	new Chart(guestCtx,guestConfig);
	
	//Map ë¶€ë¶„
	const reservationData = {
	    "KR-11": 200, "KR-26": 550, "KR-27": 340, "KR-28": 670,
	    "KR-29": 290, "KR-30": 410, "KR-31": 180, "KR-41": 880,
	    "KR-42": 420, "KR-43": 310, "KR-44": 270, "KR-45": 370,
	    "KR-46": 490, "KR-47": 200, "KR-48": 330, "KR-49": 1500,
	    "KR-50": 120
	};
	
	const regionNamesKo = {
	  "KR-11": "ì„œìš¸", "KR-26": "ë¶€ì‚°", "KR-27": "ëŒ€êµ¬", "KR-28": "ì¸ì²œ",
	  "KR-29": "ê´‘ì£¼", "KR-30": "ëŒ€ì „", "KR-31": "ìš¸ì‚°", "KR-41": "ê²½ê¸°",
	  "KR-42": "ê°•ì›", "KR-43": "ì¶©ë¶", "KR-44": "ì¶©ë‚¨", "KR-45": "ì „ë¶",
	  "KR-46": "ì „ë‚¨", "KR-47": "ê²½ë¶", "KR-48": "ê²½ë‚¨", "KR-49": "ì œì£¼",
	  "KR-50": "ì„¸ì¢…"
	};

	$('.admin-map').vectorMap({
		map: 'kr_mill',
		backgroundColor: '#e0f7fa',
		zoomButtons: false, // í™•ëŒ€/ì¶•ì†Œ ë²„íŠ¼ ë¹„í™œì„±í™”
	 	zoomOnScroll: true, // (ì„ íƒ) íœ  ì¤Œë„ ë„ê³  ì‹¶ë‹¤ë©´
		showTooltip: true,
		resize:false,
		regionStyle: {
		  initial: { fill: '#CCCCCC' },
		  hover: { fill: '#5DADE2' },
		  selected: { fill: '#FF7043' }
		},
		series: {
		  regions: [{
		    values: {
		      "KR-11": "#FADBD8", "KR-26": "#D6EAF8", "KR-27": "#D5F5E3",
		      "KR-28": "#FCF3CF", "KR-29": "#F5EEF8", "KR-30": "#F9E79F",
		      "KR-31": "#E8DAEF", "KR-50": "#E0F7FA", "KR-41": "#FDEBD0",
		      "KR-42": "#D4E6F1", "KR-43": "#D1F2EB", "KR-44": "#FAD7A0",
		      "KR-45": "#FCF3CF", "KR-46": "#F9E79F", "KR-47": "#A9DFBF",
		      "KR-48": "#AED6F1", "KR-49": "#FADBD8"
		    },
		    attribute: 'fill'
		  }]
		},
	
		onRegionClick: function (event, code) {
		    const name = regionNamesKo[code] || code;
		    const count = reservationData[code] || 0;
		    // í…ìŠ¤íŠ¸ ì¶œë ¥
		    //$('.admin-map-list').text(`${name} ì˜ˆì•½ ìˆ˜: ${count}ê±´`);
		    
		    // ëª¨ë“  í•­ëª©ì—ì„œ selected ì œê±°
		    $('.admin-item').removeClass('selected');

		    // í´ë¦­ëœ ì§€ì—­ ì½”ë“œì™€ ì¼ì¹˜í•˜ëŠ” í•­ëª©ì— selected ì¶”ê°€
		    $(`.admin-item[data-region="${code}"]`).addClass('selected');
		  },
	
		onLabelShow: function (event, label, code) {
			const name = regionNamesKo[code] || code;
			label.text(name);
		}
	
	});
});//ready
</script>
</head>
<body>
	<header class="header">
		<h1 class="logo"><img src="./img/logo_green.svg" /></h1>
		<img class="header-icon" src="./img/mypage-icon.svg" alt="icon">
	</header>
	<section class="home-bg">
		 <img id="media-img" src="./img/userpage_mainbg.png" alt="mainbg" />
        <video id="media-video" src="./media/userpage_mainbg4.mp4"></video>
		<div class="text-overlay">
			<p class="project">KOSA Front-end Project</p>
			<h2>
				GUESTHOUSE<br>ANALYSIS<br>SYSTEM
			</h2>
		</div>
	</section>

	<section class="home-content">
		<div class="home-container page1">
			<!-- ì—¬ê¸°ëŠ” ìŠ¤í¬ë¡¤ í•˜ë©´ ê°™ì´ ì˜¬ë¼ê°€ëŠ” ì•  ì“°ë©´ ëœë‹¹ -->
		</div>

		<div class="home-container page2 page-wrapper">

			<!-- ì—¬ê¸°ë‹¤ ì­‰ì­‰ ë§Œë“¤ë©´ ëœë‹¤ -->
			<div class="container">
				<div class="admin-dashboard">
					<!-- ìƒë‹¨ í†µê³„ -->
					<div class="admin-top-stats">
						<div class="admin-top-title">
							<h3>Statistics for 6</h3>
						</div>
						<div class="admin-top-card">
							<div class="admin-stat">
								<div class="admin-label">reservations</div>
								<div class="admin-value">186</div>
							</div>
							<div class="admin-stat">
								<div class="admin-label">monthly revenue</div>
								<div class="admin-value">$6,667</div>
							</div>
							<div class="admin-stat">
								<div class="admin-label">Today sales</div>
								<div class="admin-value">$198</div>
							</div>
							<div class="admin-stat">
								<div class="admin-label">average daily sales</div>
								<div class="admin-value">$222</div>
							</div>
						</div>
					</div>

					<!-- ì¤‘ê°„ ì°¨íŠ¸ -->
					<div class="admin-middle-charts">
						<div class="admin-card admin-chart">
							<canvas id="chart-age-canvas">Age Chart</canvas>
						</div>
						<div class="admin-card admin-chart">
							<canvas id="chart-revenue-canvas">Monthly Revenue</canvas>
						</div>
						<div class="admin-card admin-chart">
							<canvas id="chart-guest-canvas">Monthly Guest</canvas>
						</div>
					</div>

					<!-- í•˜ë‹¨ ì§€ë„ + ë­í‚¹ -->
					<div class="admin-bottom-section">
						<div class="admin-map-card ">
							<div class="admin-map-wrrap">
								<div class="">
									<h2 style="margin-bottom:30px;">ì§€ì—­ë³„ ì˜ˆì•½ ê±´ìˆ˜</h2>
									<div class="admin-list">
										  <div class="admin-sidebar">
										    <div class="admin-item" data-region="KR-11">ì„œìš¸ : 200</div>
											<div class="admin-item" data-region="KR-26">ë¶€ì‚° : 550</div>
										    <div class="admin-item" data-region="KR-27">ëŒ€êµ¬ : 340</div>
										    <div class="admin-item" data-region="KR-28">ì¸ì²œ : 670</div>
										    <div class="admin-item" data-region="KR-29">ê´‘ì£¼ : 290</div>
										    <div class="admin-item" data-region="KR-30">ëŒ€ì „ : 410</div>
										    <div class="admin-item" data-region="KR-31">ìš¸ì‚° : 180</div>
										    <div class="admin-item" data-region="KR-41">ê²½ê¸° : 880</div>
										    <div class="admin-item" data-region="KR-42">ê°•ì› : 420</div>
										  </div>
		  								  <div class="admin-sidebar">
										    <div class="admin-item" data-region="KR-43">ì¶©ë¶ : 310</div>
										    <div class="admin-item" data-region="KR-44">ì¶©ë‚¨ : 270</div>
										    <div class="admin-item" data-region="KR-45">ì „ë¶ : 370</div>
										    <div class="admin-item" data-region="KR-46">ì „ë‚¨ : 490</div>
										    <div class="admin-item" data-region="KR-47">ê²½ë¶ : 200</div>
										    <div class="admin-item" data-region="KR-48">ê²½ë‚¨ : 330</div>
										    <div class="admin-item" data-region="KR-49">ì œì£¼ : 1500</div>
										    <div class="admin-item" data-region="KR-50">ì„¸ì¢… : 120</div>
										  </div>
									</div>
								</div>
								<div class="admin-map"></div>
							</div>
						</div>

						<div class="admin-rank-card">
							<h2>ğŸ† Ranking</h2>
							<div class="ranking-item">
								<div class="medal">ğŸ¥‡</div>
								<div class="info">
									<div class="name">ê°•ë¦‰ ì†”ê²ŒìŠ¤íŠ¸í•˜ìš°ìŠ¤</div>
									<div class="revenue">ì»¤í”Œë§¤ì¹­ 10ê±´</div>
								</div>
							</div>
							<div class="ranking-item">
								<div class="medal">ğŸ¥ˆ</div>
								<div class="info">
									<div class="name">ì²µì•¤ì•„ì›ƒ ê²ŒìŠ¤íŠ¸í•˜ìš°ìŠ¤</div>
									<div class="revenue">ì»¤í”Œë§¤ì¹­ 8ê±´</div>
								</div>
							</div>
							<div class="ranking-item">
								<div class="medal">ğŸ¥‰</div>
								<div class="info">
									<div class="name">íŒŒí‹° ì´ëŒë¦¼ ê²ŒìŠ¤íŠ¸í•˜ìš°ìŠ¤</div>
									<div class="revenue">ì»¤í”Œë§¤ì¹­ 5ê±´</div>
								</div>
							</div>
							<div class="ranking-item">
								<div class="medal">4ë“±</div>
								<div class="info">
									<div class="name">ZIBRO S ê²ŒìŠ¤íŠ¸í•˜ìš°ìŠ¤</div>
									<div class="revenue">ì»¤í”Œë§¤ì¹­ 4ê±´</div>
								</div>
							</div>
							<div class="ranking-item">
								<div class="medal">5ë“±</div>
								<div class="info">
									<div class="name">ê¹€PD ê²ŒìŠ¤íŠ¸í•˜ìš°ìŠ¤</div>
									<div class="revenue">ì»¤í”Œë§¤ì¹­ 3ê±´</div>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
            <footer class="footer">
                <div class="footer-content">
                    <div class="footer-logo">
                        <!-- <img src="ë¡œê³ " alt="logo" /> -->
                        <h1 class="logo"><img src="./img/logo_yellow.svg" /></h1>
                    </div>

                    <div class="footer-contact">
                    <h3>Contact us</h3>
                    <ul>
                        <li>
                        <strong>So yuna</strong><br />
                        <a href="mailto:seacrab808@naver.com">seacrab808@naver.com</a>
                        </li>
                        <li>
                        <strong>Lee</strong><br />
                        <a href="mailto:dalbogi5@gmail.com">dalbogi5@gmail.com</a>
                        </li>
                        <li>
                        <strong>Kang</strong><br />
                        <a href="mailto:alsrlwpdhkd@gmail.com">alsrlwpdhkd@gmail.com</a>
                        </li>
                    </ul>
                    </div>
                </div>

                <hr />
                <div class="footer-bottom">
                    <p>Â© 2025 í•œêµ­ì†Œí”„íŠ¸ì›¨ì–´ì‚°ì—…í˜‘íšŒ. All rights reserved.</p>
                </div>
            </footer>
		</div>
	</section>
</body>
<script>
	window.addEventListener("scroll", () => {
      const header = document.querySelector(".header");
      const bgSection = document.querySelector(".home-bg");
      const contentSection = document.querySelector(".home-content");
      const header_icon = document.querySelector(".header-icon");
      const header_logo = document.querySelector(".logo>img");

      const bgBottom = bgSection.offsetTop + bgSection.offsetHeight;
      const scrollY = window.scrollY;

      if (scrollY >= bgBottom - 10) {
        header.style.backgroundColor = "#EAF6FE";
        header.style.color = "#7D7D59";
        header_icon.setAttribute("src", "./img/mypage-icon2.svg");
        header_logo.setAttribute("src", "./img/logo_green.svg");
      } else {
        header.style.backgroundColor = "transparent";
        header.style.color = "#FEFFCE";
        header_icon.setAttribute("src", "./img/mypage-icon.svg");
        header_logo.setAttribute("src", "./img/logo_yellow.svg");
      }
    });
</script>
</html>